<div class="control-group" aria-label="Chunk configuration">
        <div class="input-wrapper">
            <label for="chunkSize">Chunk Size (characters)</label>
            <input type="number" id="chunkSize" name="chunkSize" value="100" min="20">
        </div>
        <div class="input-wrapper">
            <label for="chunkOverlap">Overlap (characters)</label>
            <input type="number" id="chunkOverlap" name="chunkOverlap" value="20" min="0">
        </div>
        <div style="display:flex; align-items:flex-end;">
            <button type="button" onclick="performChunking()">
                âœ‚ï¸ Chunk Text
            </button>
        </div>
    </div>
</section>

<!-- STEP 2: View Chunks -->
<section id="step2" class="step-card" aria-labelledby="step2-title">
    <div class="step-number">2</div>
    <h2 id="step2-title">Inspect Chunks</h2>
    <p>The text has been sliced. This makes it easier to find specific information later.</p>
    <div id="chunksOutput" class="chunks-container" aria-live="polite"></div>
    <div class="control-group" style="margin-top: 20px;">
        <button type="button" onclick="generateEmbeddings(event)">
            ğŸ§  Create Vector Embeddings
        </button>
    </div>
</section>

<!-- STEP 3: Embeddings -->
<section id="step3" class="step-card" aria-labelledby="step3-title">
    <div class="step-number">3</div>
    <h2 id="step3-title">Vector Embeddings</h2>
    <p>Chunks are converted into lists of numbers (vectors). Similar meanings end up with similar numbers.</p>
    <div id="vectorsOutput" class="chunks-container" aria-live="polite"></div>
    <div class="control-group" style="margin-top: 20px;">
        <button type="button" onclick="saveToStore(event)">
            ğŸ’¾ Save Vectors to Local Storage
        </button>
    </div>
</section>

<!-- STEP 4: Query -->
<section id="step4" class="step-card" aria-labelledby="step4-title">
    <div class="step-number">4</div>
    <h2 id="step4-title">User Query</h2>
    <p>The Knowledge Base is indexed. Now, ask a question.</p>
    <div class="input-wrapper">
        <label for="userQuery">Your Question</label>
        <input type="text" id="userQuery" name="userQuery" value="How does RAG reduce hallucinations?">
    </div>
    <div class="control-group">
        <button type="button" onclick="askQuery(event)">
            ğŸ” Ask &amp; Retrieve
        </button>
    </div>
</section>

<!-- STEP 5: Retrieval -->
<section id="step5" class="step-card" aria-labelledby="step5-title">
    <div class="step-number">5</div>
    <h2 id="step5-title">Retrieval (Vector Similarity)</h2>
    <p>We convert your question into a vector and find the top matches from our database using Cosine Similarity.</p>

    <div class="control-group">
        <label for="topKSlider">Top N Results:</label>
        <input
            type="range"
            id="topKSlider"
            name="topKSlider"
            min="1"
            max="5"
            value="2"
            oninput="document.getElementById('topKVal').innerText = this.value; renderRetrieval();"
            aria-valuemin="1"
            aria-valuemax="5"
            aria-valuenow="2"
        >
        <span id="topKVal" aria-live="polite">2</span>
    </div>

    <div id="retrievalOutput" class="chunks-container" aria-live="polite"></div>
    <div class="control-group" style="margin-top: 20px;">
        <button type="button" onclick="constructPrompt()">
            ğŸ“ Construct System Prompt
        </button>
    </div>
</section>

<!-- STEP 6: Prompt Construction -->
<section id="step6" class="step-card" aria-labelledby="step6-title">
    <div class="step-number">6</div>
    <h2 id="step6-title">Prompt Engineering</h2>
    <p>We combine the original System instructions, the Retrieved Context, and the User Query into one payload.</p>
    <div id="promptOutput" class="code-block" aria-live="polite"></div>
    <div class="control-group" style="margin-top: 20px;">
        <button type="button" onclick="generateAnswer(event)">
            ğŸ¤– Send to LLM
        </button>
    </div>
</section>

<!-- STEP 7: LLM Answer -->
<section id="step7" class="step-card" aria-labelledby="step7-title">
    <div class="step-number">7</div>
    <h2 id="step7-title">LLM Generation</h2>
    <p>The LLM reads the context provided and generates an accurate answer.</p>
    <div id="llmOutput" class="llm-response" aria-live="polite"></div>
</section>
